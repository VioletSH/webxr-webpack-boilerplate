# https://circleci.com/docs/2.0/configuration-reference/
version: 2

# Workflow configuration
workflows:
  version: 2
  jobs:
    - lint
    - build:
        requires:
          - lint
    - test:
        requires:
          - build
        filters:
          branches:
            only:
              - /*.-dev/
              - master
              - /hotfix-.*/
# jobs
jobs:
  lint:
    macos:
      xcode: "9.0"
    steps:
      - checkout
      - run:
          name: install dependencies
          command: yarn install
      - run:
          name: lint (standard)
          command: yarn run lint
  build:
    macos:
      xcode: "9.0"
    steps:
      - checkout
      - run:
          name: install dependencies
          command: yarn install
      - run:
          name: build
          command: yarn run build

  test:
    macos:
      xcode: "9.0"
    steps:
      - checkout
      - run:
          name: install dependencies
          command: yarn install
      - run:
          name: run mac tests
          command: yarn run test:ci-on-mac
